---
layout: default
---

<main class="project-page">
  <section class="project-header">
    <h1>{{ page.title }}</h1>
    {% if page.subtitle %}
      <p class="subtitle">{{ page.subtitle }}</p>
    {% endif %}
  </section>

  <!-- WHAT Section -->
  <section class="project-section">
    <div class="project-image">
      {% if page.what_gallery %}
        <div class="image-grid">
          {% for item in page.what_gallery %}
            <a
              href="{{ item.image }}"
              data-lightbox="{{ page.title | slugify }}-what"
              data-title="{{ item.caption }}"
            >
              <img src="{{ item.image }}" alt="{{ item.caption }}">
            </a>
          {% endfor %}
        </div>
      {% else %}
        <img src="{{ page.what_image }}" alt="Sketch of {{ page.title }}">
      {% endif %}
    </div>
    <div class="project-text">
      <h2>What</h2>
      <p>{{ page.what_text }}</p>
    </div>
  </section>

  <!-- HOW Section -->
  <section class="project-section">
    <div class="project-image">
      {% if page.how_gallery %}
        <div class="image-grid">
          {% for item in page.how_gallery %}
            <a
              href="{{ item.image }}"
              data-lightbox="{{ page.title | slugify }}-how"
              data-title="{{ item.caption }}"
            >
              <img src="{{ item.image }}" alt="{{ item.caption }}">
            </a>
          {% endfor %}
        </div>
      {% elsif page.how_images %}
        <div class="image-grid">
          {% for image in page.how_images %}
            <a
              href="{{ image }}"
              data-lightbox="{{ page.title | slugify }}-how"
            >
              <img src="{{ image }}" alt="Process image for {{ page.title }}">
            </a>
          {% endfor %}
        </div>
      {% else %}
        <img src="{{ page.how_image }}" alt="CAD / Mockup of {{ page.title }}">
      {% endif %}
    </div>
    <div class="project-text">
      <h2>How</h2>
      <p>{{ page.how_text }}</p>
      {% if page.skills %}
        <p><strong>Skills:</strong> {{ page.skills }}</p>
      {% endif %}
    </div>
  </section>

  <!-- WHY Section -->
  <section class="project-section">
    <div class="project-image">
      {% if page.why_gallery %}
        <div class="image-grid">
          {% for item in page.why_gallery %}
            <a
              href="{{ item.image }}"
              data-lightbox="{{ page.title | slugify }}-why"
              data-title="{{ item.caption }}"
            >
              <img src="{{ item.image }}" alt="{{ item.caption }}">
            </a>
          {% endfor %}
        </div>
      {% else %}
        <img src="{{ page.why_image }}" alt="Coming soon!">
      {% endif %}
    </div>
    <div class="project-text">
      <h2>Why</h2>
      <p>{{ page.why_text }}</p>
    </div>
  </section>
</main>

<!-- Lightbox container -->
<div class="lightbox" id="lightbox">
  <button class="lightbox-close" id="lightboxClose">&times;</button>
  <button class="lightbox-nav lightbox-prev" id="lightboxPrev">&#10094;</button>
  <div class="lightbox-content">
    <img id="lightboxImg" src="" alt="Expanded view">
    <div class="lightbox-caption" id="lightboxCaption"></div>
  </div>
  <button class="lightbox-nav lightbox-next" id="lightboxNext">&#10095;</button>
</div>

<script>
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const lightboxCaption = document.getElementById('lightboxCaption');
  const closeBtn = document.getElementById('lightboxClose');
  const nextBtn = document.getElementById('lightboxNext');
  const prevBtn = document.getElementById('lightboxPrev');
  const images = document.querySelectorAll('.image-grid img, .project-image img');
  let currentIndex = 0;

  function openLightbox(index) {
    const img = images[index];
    currentIndex = index;
    lightboxImg.src = img.src;
    lightboxCaption.textContent = img.alt || '';
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden'; // prevent page scroll
  }

  function closeLightbox() {
    lightbox.classList.remove('active');
    document.body.style.overflow = ''; // restore scroll
  }

  function showNext() {
    openLightbox((currentIndex + 1) % images.length);
  }

  function showPrev() {
    openLightbox((currentIndex - 1 + images.length) % images.length);
  }

  images.forEach((img, index) => {
    img.addEventListener('click', e => {
      e.preventDefault(); // ðŸ”’ stops the default "open image" behavior
      openLightbox(index);
    });
  });

  closeBtn.addEventListener('click', closeLightbox);
  nextBtn.addEventListener('click', showNext);
  prevBtn.addEventListener('click', showPrev);

  // Close when clicking outside image or pressing keys
  lightbox.addEventListener('click', e => {
    if (e.target === lightbox) closeLightbox();
  });

  document.addEventListener('keydown', e => {
    if (!lightbox.classList.contains('active')) return;
    if (e.key === 'ArrowRight') showNext();
    if (e.key === 'ArrowLeft') showPrev();
    if (e.key === 'Escape') closeLightbox();
  });
</script>