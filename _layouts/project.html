---
layout: default
---

<main class="project-page">
  <section class="project-header">
    <h1>{{ page.title }}</h1>
    {% if page.subtitle %}
    <p class="subtitle">{{ page.subtitle }}</p>
    {% endif %}
  </section>

  <!-- WHAT Section -->
  <section class="project-section">
    <div class="project-image">
      {% if page.what_gallery %}
      <div class="image-grid what-gallery">
        {% for item in page.what_gallery %}
        <img src="{{ item.image }}" alt="{{ item.caption }}" data-caption="{{ item.caption }}" data-gallery="what">
        {% endfor %}
      </div>
      {% else %}
      <img src="{{ page.what_image }}" alt="{{ item.caption }}" data-caption="{{ item.caption }}" data-gallery="what">
      {% endif %}
    </div>
    <div class="project-text">
      <h2>What</h2>
      <p>{{ page.what_text }}</p>
    </div>
  </section>

  <!-- HOW Section -->
  <section class="project-section">
    <div class="project-image">
      {% if page.how_gallery %}
      <div class="image-grid how-gallery">
        {% for item in page.how_gallery %}
        <img src="{{ item.image }}" alt="{{ item.caption }}" data-caption="{{ item.caption }}" data-gallery="how">
        {% endfor %}
      </div>
      {% elsif page.how_images %}
      <div class="image-grid how-gallery">
        {% for image in page.how_images %}
        <img src="{{ image }}" alt="{{ item.caption }}" data-caption="{{ item.caption }}" data-gallery="how">
        {% endfor %}
      </div>
      {% else %}
      <img src="{{ page.how_image }}" alt="{{ item.caption }}" data-caption="{{ item.caption }}" data-gallery="how">
      {% endif %}
    </div>
    <div class="project-text">
      <h2>How</h2>
      <p>{{ page.how_text }}</p>
      {% if page.skills %}
      <p><strong>Skills:</strong> {{ page.skills }}</p>
      {% endif %}
    </div>
  </section>

  <!-- WHY Section -->
  <section class="project-section">
    <div class="project-image">
      {% if page.why_gallery %}
      <div class="image-grid why-gallery">
        {% for item in page.why_gallery %}
        <img src="{{ item.image }}" alt="{{ item.caption }}" data-caption="{{ item.caption }}" data-gallery="why">
        {% endfor %}
      </div>
      {% else %}
      <img src="{{ page.why_image }}" alt="Final product coming soon!" data-caption="Final product coming soon!" data-gallery="why">
      {% endif %}
    </div>
    <div class="project-text">
      <h2>Why</h2>
      <p>{{ page.why_text }}</p>
    </div>
  </section>
</main>

<!-- Lightbox container -->
<div class="lightbox" id="lightbox">
  <button class="lightbox-close" id="lightboxClose">&times;</button>
  <button class="lightbox-nav lightbox-prev" id="lightboxPrev">&#10094;</button>
  <div class="lightbox-content">
    <img id="lightboxImg" src="" alt="Expanded view">
    <div class="lightbox-caption" id="lightboxCaption"></div>
  </div>
  <button class="lightbox-nav lightbox-next" id="lightboxNext">&#10095;</button>
</div>

<script>
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const lightboxCaption = document.getElementById('lightboxCaption');
  const closeBtn = document.getElementById('lightboxClose');
  const nextBtn = document.getElementById('lightboxNext');
  const prevBtn = document.getElementById('lightboxPrev');
  
  let currentGallery = [];
  let currentIndex = 0;

  // Get all images and organize by gallery
  const allImages = document.querySelectorAll('.image-grid img, .project-image img');
  const galleries = {
    what: Array.from(document.querySelectorAll('[data-gallery="what"]')),
    how: Array.from(document.querySelectorAll('[data-gallery="how"]')),
    why: Array.from(document.querySelectorAll('[data-gallery="why"]'))
  };

  function openLightbox(galleryName, index) {
    currentGallery = galleries[galleryName];
    currentIndex = index;
    
    const img = currentGallery[currentIndex];
    lightboxImg.src = img.src;
    lightboxCaption.textContent = img.dataset.caption || img.alt || '';
    lightbox.classList.add('active');
    
    // Prevent body scroll but allow lightbox background to show scrolling
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox.classList.remove('active');
    currentGallery = [];
    // Restore body scroll
    document.body.style.overflow = '';
  }

  function showNext() {
    if (currentGallery.length === 0) return;
    currentIndex = (currentIndex + 1) % currentGallery.length;
    const img = currentGallery[currentIndex];
    lightboxImg.src = img.src;
    lightboxCaption.textContent = img.dataset.caption || img.alt || '';
  }

  function showPrev() {
    if (currentGallery.length === 0) return;
    currentIndex = (currentIndex - 1 + currentGallery.length) % currentGallery.length;
    const img = currentGallery[currentIndex];
    lightboxImg.src = img.src;
    lightboxCaption.textContent = img.dataset.caption || img.alt || '';
  }

  // Add click events to all images
  allImages.forEach((img) => {
    img.addEventListener('click', () => {
      const galleryName = img.dataset.gallery;
      const galleryImages = galleries[galleryName];
      const index = galleryImages.indexOf(img);
      openLightbox(galleryName, index);
    });
  });

  closeBtn.addEventListener('click', closeLightbox);
  nextBtn.addEventListener('click', showNext);
  prevBtn.addEventListener('click', showPrev);

  // Close when clicking on the dimmed background
  lightbox.addEventListener('click', e => {
    if (e.target === lightbox) closeLightbox();
  });

  // Keyboard navigation
  document.addEventListener('keydown', e => {
    if (!lightbox.classList.contains('active')) return;
    
    if (e.key === 'ArrowRight') showNext();
    if (e.key === 'ArrowLeft') showPrev();
    if (e.key === 'Escape') closeLightbox();
  });

  // Prevent lightbox from closing when clicking on content or controls
  lightbox.querySelector('.lightbox-content').addEventListener('click', e => {
    e.stopPropagation();
  });
  closeBtn.addEventListener('click', e => {
    e.stopPropagation();
  });
  nextBtn.addEventListener('click', e => {
    e.stopPropagation();
  });
  prevBtn.addEventListener('click', e => {
    e.stopPropagation();
  });
</script>